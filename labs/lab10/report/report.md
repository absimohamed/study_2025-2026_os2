---
## Front matter
title: "Отчёт по лабораторной работе №10"
subtitle: "Основы работы с модулями ядра операционной системы"
author: "Лабси Мохаммед"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки работы с утилитами управления модулями ядра операционной системы.

# Ход выполнения

## Управление модулями ядра из командной строки

1. Запущен терминал и получены права администратора с помощью команды **su -**.  
   После ввода пароля открыт сеанс суперпользователя **root**.  

2. Для просмотра аппаратных устройств и связанных с ними модулей ядра выполнена команда **lspci -k**.  
   В выводе отображены контроллеры и используемые драйверы — например, для сетевого адаптера используется модуль **e1000**, для видеоадаптера — **vmwgfx**.  

   ![Вывод команды lspci -k](Screenshot_1.png){ #fig:001 width=80% }

3. Для просмотра всех загруженных модулей применена команда **lsmod | sort**.  
   Отображён список модулей, включая **e1000**, **vmwgfx**, **ahci**, **snd_intel8x0** и другие.  

   ![Просмотр списка загруженных модулей](Screenshot_2.png){ #fig:002 width=80% }

4. Проверено наличие загруженного модуля **ext4** с помощью **lsmod | grep ext4** — модуль был найден в системе.  
   Затем выполнена команда **modinfo ext4** для получения подробной информации о модуле.  
   Из вывода видно, что модуль отвечает за файловую систему *Fourth Extended Filesystem*, лицензирован под GPL и не имеет параметров для настройки.  

   ![Просмотр информации о модуле ext4](Screenshot_3.png){ #fig:003 width=80% }

5. Попытка выгрузить модуль **ext4** выполнена с помощью **modprobe -r ext4**, однако операция завершилась неудачно, поскольку модуль используется системой.  
   Аналогично, при попытке выгрузить модуль **xfs** выведено сообщение об ошибке *Module xfs is in use*.  

   ![Попытка выгрузки модулей ext4 и xfs](Screenshot_4.png){ #fig:004 width=80% }

## Загрузка модулей ядра с параметрами

1. Проверено наличие модуля **bluetooth** командой **lsmod | grep bluetooth** — модуль отсутствовал.  
   После загрузки с помощью **modprobe bluetooth** модуль стал активен.  

2. Информация о модуле **bluetooth** просмотрена через **modinfo bluetooth**.  
   В выводе указано, что модуль реализует стек Bluetooth версии 2.22, имеет зависимость от модуля **rfkill** и поддерживает параметры, управляющие созданием соединений (*disable_esco*, *disable_ertm*, *enable_ecred*).  

   ![Информация о модуле bluetooth](Screenshot_5.png){ #fig:005 width=80% }

3. Выгрузка модуля **bluetooth** выполнена командой **modprobe -r bluetooth**.  

   ![Выгрузка модуля bluetooth](Screenshot_6.png){ #fig:006 width=80% }

## Обновление ядра системы

1. Проверена текущая версия ядра командой **uname -r** — **6.12.0-55.39.1.el10_0.x86_64**.  
   Список доступных пакетов ядра получен через **dnf list kernel**.  

   ![Просмотр версии и списка пакетов ядра](Screenshot_7.png){ #fig:007 width=80% }

2. Выполнено обновление системы для синхронизации репозиториев и предотвращения конфликтов:  
   **dnf upgrade --refresh**  
   После этого проведено обновление ядра и всех пакетов:  
   **dnf update kernel**, **dnf update**, **dnf upgrade --refresh**.  

   По завершении вывод системы подтвердил, что все пакеты установлены и обновлены успешно.  

   ![Обновление ядра и системы](Screenshot_8.png){ #fig:008 width=80% }

3. После перезагрузки командой **reboot** необходимо выбрать новое ядро в меню загрузки и убедиться в обновлении версии через **uname -r** и **hostnamectl**.  

   ![Просмотр информации о системе после обновления](Screenshot_9.png){ #fig:009 width=80% }

# Контрольные вопросы

1. **Какая команда показывает текущую версию ядра, которая используется на вашей системе?**  
   Для отображения версии ядра используется команда **uname -r**.  
   Она выводит номер текущей версии ядра, загруженного в систему.

2. **Как можно посмотреть более подробную информацию о текущей версии ядра операционной системы?**  
   Более детальная информация выводится командой **hostnamectl**,  
   где указывается версия ядра, архитектура системы, а также дистрибутив и версия ОС.

3. **Какая команда показывает список загруженных модулей ядра?**  
   Для просмотра всех загруженных модулей используется команда **lsmod**.  
   Она отображает имя модуля, его размер и количество зависимостей.

4. **Какая команда позволяет вам определять параметры модуля ядра?**  
   Для получения информации о модуле и его параметрах используется команда **modinfo <имя_модуля>**.  
   Она показывает описание, автора, зависимости, параметры и версию модуля.

5. **Как выгрузить модуль ядра?**  
   Для выгрузки модуля ядра применяется команда **modprobe -r <имя_модуля>**.  
   Если модуль не используется другими процессами, он будет успешно удалён из памяти.

6. **Что вы можете сделать, если получите сообщение об ошибке при попытке выгрузить модуль ядра?**  
   Если модуль используется системой, необходимо сначала остановить процессы,  
   которые его применяют, либо отмонтировать файловую систему, использующую данный модуль.

7. **Как определить, какие параметры модуля ядра поддерживаются?**  
   Для этого используется команда **modinfo <имя_модуля>**,  
   в выводе которой в разделе *parm* перечислены все поддерживаемые параметры и их типы.

8. **Как установить новую версию ядра?**  
   Новое ядро устанавливается с помощью менеджера пакетов **dnf**.  
   Сначала выполняется обновление репозиториев командой **dnf upgrade --refresh**,  
   затем обновление ядра — **dnf update kernel**,  
   после чего выполняется **dnf update** для обновления всей системы и последующая перезагрузка.

# Заключение

В ходе работы освоены основные команды управления модулями ядра Linux, их загрузка, выгрузка, просмотр параметров и обновление ядра системы.
