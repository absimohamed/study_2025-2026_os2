---
## Front matter
title: "Отчёт по лабораторной работе №12"
subtitle: "Настройки сети в Linux"
author: "Лабси Мохаммед"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки настройки сетевых параметров системы.

# Ход выполнения

## Проверка конфигурации сети

1. Получены права администратора с помощью команды **su -**.  
   После ввода пароля открыт сеанс суперпользователя **root**.  

2. Выведена информация о сетевых интерфейсах и статистике передачи пакетов с помощью команды **ip -s link**.  
   Интерфейс **enp0s3** имеет состояние **UP**, что указывает на его активность. Показано количество переданных (**TX**) и полученных (**RX**) пакетов, а также отсутствие ошибок при передаче данных.  

   ![Вывод команды ip -s link](Screenshot_1.png){ #fig:001 width=80% }

3. С помощью команды **ip route show** отображена таблица маршрутизации.  
   В таблице видно, что основной шлюз по умолчанию направлен через адрес **10.0.2.2**, а для сети **10.0.2.0/24** маршрутизация осуществляется напрямую через интерфейс **enp0s3**.  

4. Командой **ip addr show** выведена информация о назначенных IP-адресах интерфейсов.  
   Интерфейс **enp0s3** имеет IPv4-адрес **10.0.2.15/24** и IPv6-адреса для локальной и глобальной областей. Данный интерфейс обеспечивает подключение к внешней сети.  

   ![Информация о сетевых адресах](Screenshot_2.png){ #fig:002 width=80% }

5. Проверено подключение к Интернету с помощью команды **ping -c 4 8.8.8.8**.  
   Все четыре пакета успешно доставлены и получены без потерь, что подтверждает наличие доступа в сеть Интернет.  

   ![Проверка связи через ping](Screenshot_3.png){ #fig:003 width=80% }

6. К интерфейсу **enp0s3** добавлен дополнительный IP-адрес **10.0.0.10/24** командой **ip addr add 10.0.0.10/24 dev enp0s3**.  

7. Проверено добавление нового адреса с помощью **ip addr show** — в списке интерфейсов появился новый адрес **10.0.0.10/24**.  

   ![Добавление дополнительного адреса](Screenshot_4.png){ #fig:004 width=80% }

8. Для сравнения вывода утилит использована команда **ifconfig**.  
   Отображены активные интерфейсы, их MAC-адреса, IP-адреса, количество принятых и переданных пакетов, а также статистика ошибок.  

   ![Вывод команды ifconfig](Screenshot_5.png){ #fig:005 width=80% }

9. Выполнена команда **ss -tul**, показавшая список активных TCP- и UDP-портов, находящихся в состоянии **LISTEN**.  
   Среди них — стандартные службы **ssh**, **http**, **ipp**, **mdns**.  

   ![Прослушиваемые порты TCP и UDP](Screenshot_6.png){ #fig:006 width=80% }

## Управление сетевыми подключениями с помощью nmcli

1. Получены права администратора и выведен список текущих соединений с помощью **nmcli connection show**.  
   Отображены интерфейсы **enp0s3** (Ethernet) и **lo** (loopback).  

   ![Текущие соединения nmcli](Screenshot_7.png){ #fig:007 width=80% }

2. Добавлено новое Ethernet-соединение с именем **dhcp** командой:  
   **nmcli connection add con-name "dhcp" type ethernet ifname enp0s3**  

3. Создано статическое соединение **static** с IP-адресом **10.0.0.10/24** и шлюзом **10.0.0.1**:  
   **nmcli connection add con-name "static" ifname enp0s3 autoconnect no type ethernet ip4 10.0.0.10/24 gw4 10.0.0.1**  

4. После проверки командой **nmcli connection show** оба подключения были успешно добавлены.  

5. Соединение **static** активировано с помощью команды **nmcli connection up static**.  
   Проверка через **ip addr** подтвердила назначение статического IP-адреса **10.0.0.10/24**.  

   ![Активация статического соединения](Screenshot_8.png){ #fig:008 width=80% }

6. Для возврата к динамической конфигурации выполнена команда **nmcli connection up dhcp**.  
   В результате интерфейс **enp0s3** снова получил динамический адрес **10.0.2.15/24** от DHCP-сервера.  

   ![Переключение обратно на DHCP](Screenshot_9.png){ #fig:009 width=80% }

## Изменение параметров соединения с помощью nmcli

1. Отключено автоподключение для статического соединения командой  
   **nmcli connection modify static connection.autoconnect no**.  
   Это позволяет вручную управлять активацией профиля без автоматического запуска при старте системы.

2. Добавлен DNS-сервер **10.0.0.10** к статическому соединению с помощью команды  
   **nmcli connection modify static ipv4.dns 10.0.0.10**.  

3. Второй DNS-сервер **8.8.8.8** добавлен через ключ **+**, чтобы не заменить, а дополнить существующую запись:  
   **nmcli connection modify static +ipv4.dns 8.8.8.8**.  

4. Изменён основной IP-адрес соединения на **10.0.0.20/24**:  
   **nmcli connection modify static ipv4.addresses 10.0.0.20/24**.  

5. Добавлен дополнительный IP-адрес **10.20.30.40/16** для того же интерфейса:  
   **nmcli connection modify static +ipv4.addresses 10.20.30.40/16**.  

6. После внесённых изменений соединение **static** активировано командой  
   **nmcli connection up static**.  
   Проверка с помощью **nmcli connection show** и **ip addr** подтвердила успешное применение параметров — интерфейс **enp0s3** получил адреса **10.0.0.20/24** и **10.20.30.40/16**, а также DNS-серверы **10.0.0.10** и **8.8.8.8**.  

   ![Проверка изменений после активации static](Screenshot_10.png){ #fig:010 width=80% }

7. Для проверки конфигурации через текстовый интерфейс **nmtui** открыто меню редактирования соединений.  
   В параметрах профиля **static** указаны IP-адреса **10.0.0.20/24** и **10.20.30.40/16**, шлюз **10.0.0.1** и DNS-серверы **10.0.0.10**, **8.8.8.8**.  

   ![Просмотр конфигурации static через nmtui](Screenshot_11.png){ #fig:011 width=80% }

8. Также через **nmtui** просмотрены настройки соединения **dhcp**, использующего автоматическое получение параметров IPv4 и IPv6.  

   ![Просмотр конфигурации dhcp через nmtui](Screenshot_12.png){ #fig:012 width=80% }

9. Проверены сетевые параметры через графический интерфейс системы.  
   В настройках профиля **static** режим IPv4 установлен как **Manual**, добавлены два IP-адреса (**10.0.0.20**, **10.20.30.40**) и DNS (**10.0.0.10**, **8.8.8.8**).  

   ![Конфигурация static в графическом интерфейсе](Screenshot_13.png){ #fig:013 width=80% }

10. В окне настроек профиля **dhcp** видно, что используется автоматическая конфигурация IP и DNS.  

    ![Конфигурация dhcp в графическом интерфейсе](Screenshot_14.png){ #fig:014 width=80% }

11. Для возврата к первоначальному сетевому подключению выполнена команда  
    **nmcli connection up dhcp**.  
    После активации интерфейс **enp0s3** вновь получил динамический адрес от DHCP-сервера.

# Контрольные вопросы

1. **Какая команда отображает только статус соединения, но не IP-адрес?**  
   Для просмотра статуса сетевых соединений без отображения IP-адресов используется команда  
   **nmcli connection show --active**.  
   Она показывает только активные подключения и их состояние.

2. **Какая служба управляет сетью в ОС типа RHEL?**  
   Управление сетевыми интерфейсами и настройками в RHEL выполняет служба **NetworkManager**.  
   Она обеспечивает автоматическое управление соединениями и настройку параметров сети.

3. **Какой файл содержит имя узла (устройства) в ОС типа RHEL?**  
   Имя узла хранится в файле **/etc/hostname**.  
   Этот файл содержит только одно значение — текущее имя хоста системы.

4. **Какая команда позволяет вам задать имя узла (устройства)?**  
   Для изменения имени узла используется команда **hostnamectl set-hostname <имя_устройства>**.  
   После выполнения команда обновляет файл **/etc/hostname** и применяет новое имя без перезагрузки.

5. **Какой конфигурационный файл можно изменить для включения разрешения имён для конкретного IP-адреса?**  
   Для ручного сопоставления имён и IP-адресов используется файл **/etc/hosts**.  
   В нём можно добавить строку в формате:  
   `10.0.0.10 server.localdomain server`.

6. **Какая команда показывает текущую конфигурацию маршрутизации?**  
   Текущие маршруты отображаются командой **ip route show**.  
   Она выводит список сетей, шлюзов и интерфейсов, через которые выполняется маршрутизация пакетов.

7. **Как проверить текущий статус службы NetworkManager?**  
   Для проверки состояния службы используется команда  
   **systemctl status NetworkManager**.  
   В выводе отображается информация о её активности, состоянии и журнале последних действий.

8. **Какая команда позволяет вам изменить текущий IP-адрес и шлюз по умолчанию для вашего сетевого соединения?**  
   Изменить параметры IP и шлюза можно командой  
   **nmcli connection modify <имя_соединения> ipv4.addresses <IP/маска> gw4 <шлюз>**.  
   После внесения изменений соединение необходимо активировать:  
   **nmcli connection up <имя_соединения>**.

# Заключение

В ходе работы были изучены команды и конфигурационные файлы, связанные с управлением сетевыми подключениями в Linux.  
Рассмотрены способы изменения IP-адресов, шлюзов, DNS-серверов и имени узла, а также проверка статуса службы NetworkManager.  
Освоенные инструменты позволяют эффективно настраивать и контролировать сетевые параметры в системах на базе RHEL.
