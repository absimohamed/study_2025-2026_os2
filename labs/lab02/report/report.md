---
## Front matter
title: "Отчёт по лабораторной работе №2"
subtitle: "Управление пользователями и группами"
author: "Лабси Мохаммед"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить представление о работе с учётными записями пользователей и группами пользователей в операционной системе типа Linux.

# Ход выполнения

## Переключение учётных записей пользователей

1. Выполнен вход в систему под обычным пользователем **mlabsi**.  
   Для определения текущей учётной записи использована команда **whoami**, которая вывела имя активного пользователя.  
   Команда **id** отобразила расширенную информацию:  
   - **uid=1000** — идентификатор пользователя *mlabsi*;  
   - **gid=1000** — основной идентификатор группы;  
   - **groups=1000(m labsi), 10(wheel)** — список групп, в которые входит пользователь;  
   - поле **context** отражает текущий SELinux-контекст процесса.  

   ![Определение текущего пользователя и его идентификаторов](Screenshot_1.png){ #fig:001 width=80% }

2. Для получения прав суперпользователя использована команда **su**.  
   После ввода пароля пользователя **root** был открыт сеанс суперпользователя.  
   Повторный вызов команды **id** показал:  
   - **uid=0**, **gid=0** — пользователь и группа *root*;  
   - отсутствие дополнительных групп, что характерно для суперпользователя.  

   ![Переключение к пользователю root и проверка идентификаторов](Screenshot_1.png){ #fig:002 width=80% }

3. Возврат к учётной записи обычного пользователя выполнен с помощью команды **exit**, что завершило сеанс **root**.

## Просмотр и анализ файла sudoers

4. Файл **/etc/sudoers** открыт в безопасном режиме с помощью команды **sudo -i visudo**.  
   Использование **visudo** необходимо, так как утилита выполняет проверку синтаксиса перед сохранением файла.  
   Это предотвращает ошибки конфигурации, которые могут полностью заблокировать возможность использования **sudo** при редактировании файла обычным текстовым редактором.

   ![Просмотр файла /etc/sudoers с помощью visudo](Screenshot_2.png){ #fig:003 width=80% }

5. В файле **/etc/sudoers** обнаружена строка  
   **%wheel ALL=(ALL) ALL**.  
   Она означает, что все пользователи, входящие в группу **wheel**, имеют право выполнять любые команды с повышенными привилегиями через **sudo**.  
   Группа **wheel** используется для централизованного управления доступом к административным операциям.

## Создание и настройка пользователей

6. Под пользователем **mlabsi** создан пользователь **alice**, включённый в группу **wheel**, командой  
   **sudo -i useradd -G wheel alice**.  
   Проверка через **id alice** подтвердила наличие пользователя в группе **wheel**.  

7. Для пользователя **alice** установлен пароль командой **sudo -i passwd alice**.

8. Выполнено переключение на учётную запись **alice** с помощью **su alice**.  

9. Под пользователем **alice** создан пользователь **bob** командой **sudo useradd bob**.  
   После ввода пароля выполнена установка пароля пользователя **bob** командой **sudo passwd bob**.  
   Команда **id bob** показала, что пользователь **bob** входит только в свою основную группу.

   ![Создание пользователей alice и bob и проверка их групп](Screenshot_3.png){ #fig:004 width=80% }

## Настройка параметров создания пользователей

10. Выполнен вход под пользователем **root** и открыт файл **/etc/login.defs** для редактирования.  
    Установлены параметры:  
    - **CREATE_HOME yes** — автоматическое создание домашнего каталога пользователя;  
    - **USERGROUPS_ENAB no** — отключено создание персональной группы с именем пользователя, вместо этого используется группа **users**.  

    ![Редактирование файла /etc/login.defs](Screenshot_4.png){ #fig:005 width=80% }

11. В каталоге **/etc/skel** созданы каталоги **Pictures** и **Documents**, которые будут автоматически добавляться в домашние каталоги новых пользователей.  
    Также в файл **.bashrc** добавлена строка **export EDITOR=/usr/bin/vim**, задающая текстовый редактор по умолчанию.

    ![Настройка содержимого каталога /etc/skel и файла .bashrc](Screenshot_5.png){ #fig:006 width=80% }

## Создание пользователя carol и анализ его параметров

12. Под пользователем **alice** создан пользователь **carol** командой **sudo -i useradd carol** и установлен пароль.  

13. Выполнено переключение на пользователя **carol**.  
    Команда **id** показала, что основной группой пользователя является **users (gid=100)**.  
    Просмотр содержимого домашнего каталога подтвердил наличие каталогов **Pictures** и **Documents**, созданных на основе **/etc/skel**.

    ![Проверка параметров пользователя carol и его домашнего каталога](Screenshot_6.png){ #fig:007 width=80% }

14. Под пользователем **alice** выполнен просмотр строки пользователя **carol** в файле **/etc/shadow**.  
    Запись содержит:  
    - хэш пароля;  
    - дату последнего изменения пароля;  
    - параметры минимального и максимального срока действия пароля.  

15. Изменены параметры срока действия пароля пользователя **carol** командой  
    **sudo passwd -n 30 -w 3 -x 90 carol**.  
    Повторная проверка файла **/etc/shadow** подтвердила изменение значений.

    ![Изменение и проверка параметров пароля пользователя carol](Screenshot_7.png){ #fig:008 width=80% }

16. Проверено наличие идентификаторов пользователей **alice** и **carol** в файлах **/etc/passwd**, **/etc/shadow** и **/etc/group**.  
    Пользователь **alice** присутствует во всех трёх файлах, тогда как пользователь **carol** отсутствует в файле **/etc/group** как отдельная группа, что соответствует заданным настройкам.

## Работа с группами

17. Под пользователем **alice** созданы группы **main** и **third** с помощью **groupadd**.  

18. Пользователи **alice** и **bob** добавлены в группу **main**, пользователь **carol** — в группу **third** с использованием команды **usermod -aG**.  

19. Проверка через **id** показала:  
    - пользователь **alice** состоит в группах *alice*, *wheel* и *main*;  
    - пользователь **bob** состоит в группах *bob* и *main*;  
    - пользователь **carol** имеет основную группу *users* и вторичную группу *third*.  

    ![Проверка групп пользователей alice, bob и carol](Screenshot_8.png){ #fig:009 width=80% }

## Проверка прав доступа к каталогам

20. Под пользователем **root** созданы каталоги **/data/main** и **/data/third**.  
    Для них назначены соответствующие группы и права доступа **770**, что разрешает доступ только владельцу и членам группы.  

21. При входе под пользователем **bob** подтвержден доступ к каталогу **/data/main** и невозможность доступа к **/data/third**, что демонстрирует корректную настройку прав на основе групп.

    ![Проверка прав доступа пользователей к каталогам](Screenshot_9.png){ #fig:010 width=80% }

## Контрольные вопросы

1. **При помощи каких команд можно получить информацию о номере (идентификаторе), назначенном пользователю Linux, и о группах, в которые он включён?**  
   Для получения информации об идентификаторе пользователя и его группах используются команды **id**, **whoami** и **groups**.  
   Команда **id** выводит UID пользователя, его основной GID и список всех дополнительных групп.  
   Команда **whoami** отображает имя текущего пользователя, а **groups** показывает перечень групп, в которые он входит.

2. **Какой UID имеет пользователь root? При помощи какой команды можно узнать UID пользователя? Приведите примеры.**  
   Пользователь **root** имеет идентификатор **UID = 0**.  
   Узнать UID пользователя можно с помощью команды **id**, например: **id root** или **id alice**.  
   В выводе команды значение **uid=0** однозначно указывает на суперпользователя.

3. **В чём состоит различие между командами su и sudo?**  
   Команда **su** выполняет переключение на другую учётную запись (чаще всего на **root**) и требует ввода пароля целевого пользователя.  
   Команда **sudo** позволяет выполнять отдельные команды с повышенными привилегиями от имени **root** или другого пользователя, используя пароль текущего пользователя и в соответствии с настройками безопасности.

4. **В каком конфигурационном файле определяются параметры sudo?**  
   Основные параметры и правила использования **sudo** задаются в конфигурационном файле **/etc/sudoers**, а также в дополнительных файлах каталога **/etc/sudoers.d/**.

5. **Какую команду следует использовать для безопасного изменения конфигурации sudo?**  
   Для безопасного редактирования конфигурации **sudo** используется команда **visudo**.  
   Она выполняет проверку синтаксиса файла перед сохранением и предотвращает появление ошибок, которые могут заблокировать использование **sudo**.

6. **Если вы хотите предоставить пользователю доступ ко всем командам администрирования системы через sudo, членом какой группы он должен быть?**  
   Пользователь должен входить в группу **wheel**, так как строка  
   **%wheel ALL=(ALL) ALL**  
   в файле **/etc/sudoers** разрешает всем членам этой группы выполнять любые команды с использованием **sudo**.

7. **Какие файлы и каталоги используются для определения параметров, применяемых при создании учётных записей пользователей? Приведите примеры настроек.**  
   Основные параметры создания пользователей определяются в файле **/etc/login.defs**, например **CREATE_HOME** и **USERGROUPS_ENAB**.  
   Каталог **/etc/skel** содержит шаблонные файлы и каталоги, которые автоматически копируются в домашний каталог нового пользователя, такие как **.bashrc**, **Pictures** и **Documents**.

8. **Где хранится информация о первичной и дополнительных группах пользователей Linux? Приведите пояснение для пользователя alice.**  
   Информация о пользователях хранится в файле **/etc/passwd**, а сведения о группах — в файле **/etc/group**.  
   Для пользователя **alice** в файле **/etc/passwd** указана его основная группа, а в файле **/etc/group** перечислены дополнительные группы, такие как **wheel** и **main**, в которых он состоит.

9. **Какие команды можно использовать для изменения информации о пароле пользователя (например, срока его действия)?**  
   Для изменения параметров пароля используется команда **passwd** с дополнительными ключами, например **-n**, **-w** и **-x**.  
   Также для просмотра и изменения информации о сроке действия пароля может применяться команда **chage**.

10. **Какую команду следует использовать для прямого изменения информации в файле /etc/group и почему?**  
    Для безопасного изменения файла **/etc/group** используется команда **vigr**.  
    Она блокирует файл на время редактирования и выполняет проверку корректности формата, что предотвращает повреждение системной конфигурации.

# Заключение

В ходе лабораторной работы были изучены и отработаны основные приёмы управления учётными записями и группами пользователей в ОС Linux. Выполнено переключение между пользователями, настройка прав суперпользователя с использованием **su** и **sudo**, а также анализ конфигурационных файлов **/etc/sudoers**, **/etc/login.defs** и **/etc/skel**. Созданы новые пользователи и группы, настроены параметры паролей и права доступа к каталогам. Полученные результаты подтверждают корректную работу механизмов аутентификации, авторизации и разграничения доступа в системе.
