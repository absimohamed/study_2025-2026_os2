---
## Front matter
title: "Отчёт по лабораторной работе №4"
subtitle: "Работа с программными пакетами"
author: "Лабси Мохаммед"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки работы с репозиториями и менеджерами пакетов.

# Ход выполнения

## Работа с репозиториями

1. Выполнен переход в режим суперпользователя с помощью команды **su -**.  
   После ввода пароля открыт сеанс пользователя **root**, что позволило выполнять административные операции.

2. Осуществлён переход в каталог **/etc/yum.repos.d** командой **cd /etc/yum.repos.d**.  
   Содержимое каталога просмотрено с помощью команды **ls**, в результате чего были обнаружены файлы репозиториев Rocky Linux.  
   Для изучения структуры и параметров репозитория выполнена команда **cat rocky-extras.repo**, в которой отображены настройки источника пакетов, параметры проверки подписи и состояние репозитория (*enabled=1*).

   ![Просмотр каталога и файла репозитория](Screenshot_1.png){ #fig:002 width=80% }

3. Получен список активных репозиториев с помощью команды **dnf repolist**.  
   В выводе отображены идентификаторы репозиториев (**repo id**) и их описательные имена (**repo name**), что подтверждает доступность источников пакетов *BaseOS*, *AppStream*, *Extras* и *SIG Core Common*.

   ![Список репозиториев](Screenshot_2.png){ #fig:003 width=80% }

4. Выполнён поиск пакетов, в названии или описании которых содержится слово *user*, с помощью команды **dnf search user**.  
   В результате выведен перечень пакетов, связанных с управлением пользователями, библиотеками и административными утилитами, что демонстрирует механизм поиска ПО по ключевым словам.

5. Перед установкой утилиты **nmap** выполнен поиск доступных пакетов командой **dnf search nmap**, а также просмотр подробной информации о пакете с помощью **dnf info nmap**.  
   Из полученных данных следует, что **nmap** является инструментом для сетевого сканирования и анализа безопасности и распространяется через репозиторий *AppStream*.

   ![Информация о пакете nmap](Screenshot_3.png){ #fig:005 width=80% }

6. Установка пакета выполнена командой **dnf install nmap**, в ходе которой был установлен основной пакет.  
   Далее выполнена команда **dnf install nmap\***, которая устанавливает основной пакет и все связанные с ним подпакеты (например, **nmap-ncat**).  
   Таким образом, команда **dnf install nmap** устанавливает только основной пакет, а **dnf install nmap\*** — весь набор пакетов с данным префиксом.

   ![Установка пакета nmap](Screenshot_4.png){ #fig:006 width=80% }

7. Удаление пакета выполнено командой **dnf remove nmap**, что привело к удалению основного пакета.  
   Затем использована команда **dnf remove nmap\***, в результате чего были удалены оставшиеся связанные пакеты.

   ![Удаление пакетов nmap](Screenshot_5.png){ #fig:007 width=80% }

8. Получен список доступных и установленных групп пакетов с помощью команд **dnf groups list** и **LANG=C dnf groups list**.  
   В перечне доступных групп обнаружена группа **RPM Development Tools**.

9. Получена подробная информация о группе **RPM Development Tools** с помощью команды **dnf groups info "RPM Development Tools"**.  
   В выводе отображено назначение группы и перечень пакетов, предназначенных для сборки RPM-пакетов.

   ![Информация о группе RPM Development Tools](Screenshot_6.png){ #fig:009 width=80% }

10. Выполнена установка группы пакетов **RPM Development Tools** командой **dnf groupinstall "RPM Development Tools"**.  
    В ходе выполнения были установлены необходимые инструменты и зависимости.  
    После этого группа была удалена командой **dnf groupremove "RPM Development Tools"**.

   ![Установка и удаление группы пакетов](Screenshot_7.png){ #fig:010 width=80% }

   ![Установка и удаление группы пакетов](Screenshot_8.png){ #fig:011 width=80% }

11. Просмотрена история использования менеджера пакетов с помощью команды **dnf history**.  
    В выводе отображены все операции установки, удаления и обновления пакетов с указанием времени и типа действия.

   ![История команд dnf](Screenshot_9.png){ #fig:012 width=80% }

12. Выполнена отмена ранее выполненной операции с помощью команды **dnf history undo 12**.  
    В результате были восстановлены пакеты, удалённые при выполнении команды удаления группы **RPM Development Tools**, что подтверждает возможность отката изменений.

## Использование rpm

1. Для проверки наличия пакета **lynx** в репозиториях выполнена команда **dnf list lynx**.  
   В результате установлено, что пакет **lynx.x86_64** версии *2.9.0-6.el10* уже установлен в системе.  
   Далее выполнена команда **dnf install lynx --downloadonly**, предназначенная для загрузки rpm-пакета без повторной установки.  
   Поскольку пакет уже установлен, дополнительных действий выполнено не было.

   ![Проверка наличия пакета lynx и загрузка rpm-пакета](Screenshot_10.png){ #fig:013 width=80% }

2. Для определения расположения исполняемого файла текстового браузера выполнена команда **which lynx**.  
   В результате установлено, что исполняемый файл расположен по пути **/usr/bin/lynx**.

   ![Определение расположения исполняемого файла lynx](Screenshot_11.png){ #fig:014 width=80% }

3. С помощью команды **rpm -qf $(which lynx)** определено, к какому пакету принадлежит файл **/usr/bin/lynx**.  
   Вывод подтвердил, что данный файл относится к пакету **lynx-2.9.0-6.el10.x86_64**.  
   Для получения расширенной информации о пакете выполнена команда **rpm -qi lynx**, в результате чего были выведены сведения о версии, архитектуре, лицензии, размере, дате сборки и назначении пакета.

4. Получен список всех файлов, входящих в состав пакета, с помощью команды **rpm -ql lynx**.  
   В выводе представлены исполняемые файлы, конфигурационные файлы и документация.  
   Дополнительно с помощью команды **rpm -qd lynx** выведен перечень файлов документации пакета, размещённых в каталоге **/usr/share/doc/lynx/**.

   ![Список файлов и документации пакета lynx](Screenshot_12.png){ #fig:016 width=80% }

   ![Список файлов и документации пакета lynx](Screenshot_13.png){ #fig:017 width=80% }

5. Для ознакомления с документацией выполнена команда **man lynx**.  
   В справочном руководстве описано назначение программы, синтаксис запуска, доступные параметры и основные возможности текстового веб-браузера.

   ![Просмотр справочного руководства lynx](Screenshot_14.png){ #fig:018 width=80% }

6. Получен список конфигурационных файлов пакета с помощью команды **rpm -qc lynx**.  
   В результате выведены файлы конфигурации, расположенные в каталоге **/etc**, включая **lynx.cfg**, **lynx.lss** и **lynx-site.cfg**.

7. Выполнена команда **rpm -q --scripts lynx** для просмотра скриптов, выполняемых при установке и удалении пакета.  
   В данном случае скрипты отсутствуют, что означает отсутствие дополнительных действий, выполняемых автоматически при установке или удалении пакета.  
   Обычно такие скрипты используются для настройки окружения, обновления кэша или регистрации сервисов.

8. В отдельном терминале под учётной записью обычного пользователя запущен текстовый браузер **lynx**.  
   Браузер успешно открыл стартовую страницу Rocky Linux, что подтверждает корректность установки и работоспособность пакета.

   ![Запуск текстового браузера lynx](Screenshot_15.png){ #fig:019 width=80% }

9. После проверки работоспособности выполнён возврат в терминал с учётной записью **root** и удаление пакета командой **rpm -e lynx**.  
   Удаление прошло успешно, после чего выполнена команда **ls** для подтверждения завершения работы в текущем каталоге.

   ![Удаление пакета lynx](Screenshot_16.png){ #fig:020 width=80% }
## Использование rpm (установка и анализ пакета dnsmasq)

1. Для проверки наличия пакета **dnsmasq** в системе выполнена команда **dnf list dnsmasq**.  
   В результате установлено, что пакет **dnsmasq.x86_64** версии *2.90-4.el10* уже установлен из репозитория *AppStream*.  
   Повторная установка выполнена командой **dnf install dnsmasq**, при этом система сообщила, что пакет уже установлен и дополнительных действий не требуется.

   ![Проверка и установка пакета dnsmasq](Screenshot_17.png){ #fig:021 width=80% }

2. Для определения расположения исполняемого файла выполнена команда **which dnsmasq**.  
   Установлено, что исполняемый файл расположен по пути **/usr/sbin/dnsmasq**.

3. С помощью команды **rpm -qf $(which dnsmasq)** определено, к какому пакету принадлежит исполняемый файл.  
   Вывод подтвердил, что файл относится к пакету **dnsmasq-2.90-4.el10.x86_64**.  
   Далее выполнена команда **rpm -qi dnsmasq**, в результате чего получена подробная информация о пакете, включая версию, архитектуру, лицензию, назначение и описание.

   ![Информация о пакете dnsmasq](Screenshot_18.png){ #fig:023 width=80% }

4. Получен список всех файлов, входящих в состав пакета, с помощью команды **rpm -ql dnsmasq**.  
   В выводе представлены исполняемый файл, конфигурационные файлы, systemd-сервис, документация и вспомогательные каталоги.  
   Дополнительно с помощью команды **rpm -qd dnsmasq** выведен перечень файлов документации пакета, размещённых в каталоге **/usr/share/doc/dnsmasq/**.

   ![Список файлов и документации пакета dnsmasq](Screenshot_19.png){ #fig:024 width=80% }

5. Для ознакомления с документацией выполнена команда **man dnsmasq**.  
   В справочном руководстве описано назначение службы **dnsmasq**, её возможности как DNS-, DHCP- и TFTP-сервера, а также основные параметры конфигурации.

   ![Просмотр справочного руководства dnsmasq](Screenshot_20.png){ #fig:025 width=80% }

6. Получен перечень конфигурационных файлов пакета с помощью команды **rpm -qc dnsmasq**.  
   В результате выведены основные конфигурационные файлы, расположенные в каталоге **/etc**, включая **dnsmasq.conf** и файл конфигурации D-Bus.

7. С помощью команды **rpm -q --scripts dnsmasq** выведены скрипты, выполняемые при установке, обновлении и удалении пакета.  
   В состав пакета входят:
   - *preinstall*-скрипт, создающий системного пользователя и группу **dnsmasq**;
   - *postinstall*-скрипт, регистрирующий и активирующий systemd-сервис **dnsmasq.service**;
   - *preuninstall*- и *postuninstall*-скрипты, предназначенные для корректного удаления или обновления сервиса.  
   Данные скрипты обеспечивают корректную интеграцию службы **dnsmasq** в систему.

   ![Скрипты установки и удаления пакета dnsmasq](Screenshot_21.png){ #fig:027 width=80% }

8. После завершения анализа выполнено удаление пакета с помощью команды **rpm -e dnsmasq**.  
   Удаление прошло успешно, что завершило работу с пакетом **dnsmasq**.

## Контрольные вопросы

1. **Какая команда позволяет искать rpm-пакет, содержащий файл useradd?**  
   Для определения пакета, в состав которого входит файл **useradd**, используется команда  
   **rpm -qf /usr/sbin/useradd**.  
   Она позволяет по имени файла определить, какому rpm-пакету он принадлежит.

2. **Какие команды нужно использовать, чтобы показать имя группы dnf, содержащей инструменты безопасности, и просмотреть её содержимое?**  
   Для просмотра списка групп пакетов используется команда **dnf groups list**.  
   Для получения подробной информации о группе с инструментами безопасности применяется команда  
   **dnf groups info "Security Tools"**,  
   которая выводит описание группы и перечень входящих в неё пакетов.

3. **Какая команда позволяет установить rpm-пакет, загруженный из Интернета и отсутствующий в репозиториях?**  
   Для установки локального rpm-пакета используется команда  
   **rpm -Uhv имя_пакета.rpm**.  
   Она выполняет установку или обновление пакета с отображением процесса установки.

4. **Какая команда позволяет убедиться, что rpm-пакет не содержит опасных скриптов?**  
   Для просмотра скриптов установки и удаления rpm-пакета используется команда  
   **rpm -q --scripts имя_пакета**.  
   Она выводит содержимое preinstall-, postinstall-, preuninstall- и postuninstall-скриптов.

5. **Какая команда показывает всю документацию, содержащуюся в rpm-пакете?**  
   Для отображения файлов документации используется команда  
   **rpm -qd имя_пакета**.  
   Она выводит список всех файлов документации, входящих в состав пакета.

6. **Какая команда показывает, какому rpm-пакету принадлежит файл?**  
   Для определения принадлежности файла пакету используется команда  
   **rpm -qf путь_к_файлу**.  
   Она позволяет установить, какой rpm-пакет установил указанный файл.

# Заключение

В ходе лабораторной работы были изучены основные приёмы управления программными пакетами в системе Rocky Linux с использованием менеджеров **dnf** и **rpm**.  
Были рассмотрены операции поиска, установки и удаления пакетов, анализа их содержимого, документации и конфигурационных файлов, а также работы с группами пакетов и историей изменений.  
Полученные навыки позволяют контролировать состав установленного программного обеспечения, проверять корректность пакетов и эффективно администрировать систему.
