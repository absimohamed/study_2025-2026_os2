---
## Front matter
title: "Отчёт по лабораторной работе №14"
subtitle: "Партиции, файловые системы, монтирование"
author: "Лабси Мохаммед"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки создания разделов на диске и файловых систем. Получить навыки монтирования файловых систем.

# Ход выполнения

## Создание разделов MBR с помощью fdisk

1. Получены полномочия администратора и выполнен просмотр доступных дисков с помощью утилиты fdisk.  
   На экране отображены устройства /dev/sda, /dev/sdb, /dev/sdc, включая добавленные виртуальные носители.

   ![Просмотр списка дисков](Screenshot_1.png){ #fig:001 width=80% }

2. Запущена утилита fdisk для работы с диском /dev/sda.  
   Поскольку таблица разделов отсутствовала, автоматически создана новая MBR-таблица.  
   Для получения списка доступных команд был вызван режим справки.

   ![Интерфейс справки fdisk](Screenshot_2.png){ #fig:002 width=80% }

3. Выполнен просмотр текущего состояния диска.  
   Было подтверждено наличие свободного пространства для создания новых разделов.

4. Создан основной раздел размером 300 MiB.  
   После задания параметров разметки таблица разделов была записана на диск.

   ![Создание раздела 300M](Screenshot_3.png){ #fig:003 width=80% }

5. Выполнена проверка созданного раздела через утилиты отображения таблицы разделов и данных ядра.

   ![Появление /dev/sda1](Screenshot_4.png){ #fig:004 width=80% }

   **Разница между выводами:**

   - fdisk показывает таблицу разделов, считанную напрямую с диска.  
   - /proc/partitions отображает структуру, известную ядру, которая может не обновиться сразу.

6. Таблица разделов ядра обновлена с помощью специализированной команды.

## Создание расширенного и логического разделов

1. Повторно запущена утилита fdisk для добавления расширенного раздела, занимающего всё оставшееся пространство, а затем создан логический раздел размером 300 MiB.  
   Изменения записаны в таблицу.

   ![Создание extended и логического sda5](Screenshot_5.png){ #fig:005 width=80% }

2. Выполнен повторный просмотр обновлённой разметки диска.

   ![Просмотр обновлённой разметки диска](Screenshot_6.png){ #fig:006 width=80% }

## Создание раздела подкачки

1. Запущена утилита fdisk и создан логический раздел подкачки с размером 300 MiB.  
   Тип раздела изменён на Linux swap (код 82).  
   Изменения сохранены.

   ![Создание раздела подкачки](Screenshot_7.png){ #fig:007 width=80% }

2. Проверена итоговая структура разделов.

    ![Разделы sda1, sda2, sda5, sda6](Screenshot_8.png){ #fig:008 width=80% }

3. Выполнено форматирование раздела подкачки и его активация.

4. Проверено текущее состояние пространства подкачки, подтверждающее успешное подключение.

## Создание разделов GPT с помощью gdisk

1. Получены полномочия администратора и выполнен просмотр таблицы разделов диска /dev/sdb с помощью утилиты gdisk.  
   Программа не обнаружила существующей структуры и создала новую таблицу GPT в памяти.

   ![Просмотр GPT-разметки диска](Screenshot_9.png){ #fig:009 width=80% }

2. Запущена утилита gdisk для диска /dev/sdb.  
   После запуска создан новый раздел:

   - выбран номер раздела по умолчанию;  
   - принят первый доступный сектор;  
   - задан размер 300 MiB;  
   - оставлен тип 8300 (Linux filesystem).

   ![Создание GPT-раздела 300MiB](Screenshot_10.png){ #fig:010 width=80% }

3. Выведена таблица разделов для проверки и затем записана на диск.  

4. После записи выполнен повторный просмотр структуры разделов диска /dev/sdb.

   ![Проверка созданного раздела](Screenshot_11.png){ #fig:011 width=80% }

## Форматирование файловых систем

1. Для раздела /dev/sda1 создана файловая система XFS и установлена метка тома *xfsdisk*.

   ![Создание XFS-раздела](Screenshot_12.png){ #fig:012 width=80% }

2. Для раздела /dev/sda5 создана файловая система EXT4.  
   Установлена метка *ext4disk* и включены параметры монтирования по умолчанию — *acl* и *user_xattr*.

   ![Создание EXT4-раздела](Screenshot_13.png){ #fig:013 width=80% }

## Ручное монтирование файловой системы

1. Создана точка монтирования /mnt/tmp.  
   Раздел /dev/sda5 примонтирован вручную, проверено его присутствие в списке смонтированных файловых систем, затем раздел был корректно отмонтирован.

   ![Ручное монтирование EXT4](Screenshot_14.png){ #fig:014 width=80% }

## Автоматическое монтирование через /etc/fstab

1. Создана точка монтирования /mnt/data.  
   Получен UUID раздела /dev/sda1 с помощью утилиты blkid.

   ![Просмотр UUID и типов файловых систем](Screenshot_15.png){ #fig:015 width=80% }

2. В файл /etc/fstab добавлена строка для автоматического монтирования раздела XFS /dev/sda1:

## Самостоятельная работа

1. На диске /dev/sdb с разметкой GPT выполнено добавление двух новых разделов размером по 100 MiB.  
   Первый из них настроен как файловая система Linux, второй — как раздел подкачки.

   ![Создание двух GPT-разделов по 100MiB](Screenshot_17.png){ #fig:017 width=80% }

2. Раздел /dev/sdb2 отформатирован в файловую систему EXT4.  
   Установлена метка *ext4disk2* и применены параметры монтирования по умолчанию.  
   Раздел /dev/sdb3 подготовлен как область подкачки.

   ![Форматирование EXT4 и создание swap](Screenshot_18.png){ #fig:018 width=80% }

3. Просмотрены UUID новых разделов и добавлены записи в /etc/fstab:

- раздел EXT4 монтируется в /mnt/data-ext;  
- раздел подкачки активируется как swap.

   ![Настройка fstab](Screenshot_19.png){ #fig:019 width=80% }

4. После перезагрузки проверено автоматическое монтирование и работа области подкачки:

   - раздел EXT4 успешно примонтирован в /mnt/data-ext;  
   - swap активирован системой;  
   - вывод df -h и free -m подтверждает корректную работу.

   ![Проверка после перезагрузки](Screenshot_20.png){ #fig:020 width=80% }

# Контрольные вопросы

1. **Какой инструмент используется для создания разделов GUID?**
   Для работы с дисками в формате **GPT** применяется утилита **gdisk**.

2. **Какой инструмент применяется для создания разделов MBR?**
   Разделы с разметкой **MBR** создаются с помощью утилиты **fdisk**.

3. **Какой файл используется для автоматического монтирования разделов во время загрузки?**
   Для автоматического монтирования файловых систем используется конфигурационный файл **/etc/fstab**.

4. **Какой вариант монтирования целесообразно выбрать, если необходимо, чтобы файловая система не была автоматически примонтирована во время загрузки?**
   Следует указать параметр **noauto**, который запрещает автоматическое монтирование при старте системы.

5. **Какая команда позволяет форматировать раздел с типом 82 с соответствующей файловой системой?**
   Для раздела типа **82 (Linux swap)** используется команда **mkswap** для его форматирования.

6. **Вы только что добавили несколько разделов для автоматического монтирования при загрузке. Как можно безопасно проверить, будет ли это работать без реальной перезагрузки?**
   Проверить корректность настроек можно с помощью команды **mount -a**, которая пытается смонтировать всё, что указано в /etc/fstab.

7. **Какая файловая система создаётся, если вы используете команду mkfs без какой-либо спецификации файловой системы?**
   По умолчанию команда **mkfs** создаёт файловую систему **ext2**.

8. **Как форматировать раздел EXT4?**
   Создание файловой системы **ext4** выполняется командой **mkfs.ext4 /dev/имя_раздела**.

9. **Как найти UUID для всех устройств на компьютере?**
   UUID всех блочных устройств можно просмотреть командой **blkid**, которая выводит тип файловой системы, метки и уникальные идентификаторы.

	
# Заключение

В ходе работы были изучены методы разметки дисков с использованием MBR и GPT, создание основных, расширенных и логических разделов, а также форматирование их в различные файловые системы. Освоены приемы настройки автоматического монтирования через файл *fstab* и конфигурирование пространства подкачки. Полученные навыки позволяют уверенно выполнять базовое администрирование дисковой подсистемы Linux.
